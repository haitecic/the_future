<!DOCTYPE html>
<html>
<head>
<title>Facebook Login JavaScript Example</title>
<meta charset="UTF-8">
</head>
<body>
	<form id="user_data_submit" action="vote_index.php" method="post">
ã€€  <input id="user_data" type="hidden" name="data" value="">
	</form>
<fb:login-button scope="public_profile,email, user_friends" onlogin="pressLoginState();">
</fb:login-button>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.js"></script>	
   <script>
      window.fbAsyncInit = function() {
        FB.init({
          appId      : '1109820955698868',
          xfbml      : true,
          version    : 'v2.3'
        });
      };

      (function(d, s, id){
         var js, fjs = d.getElementsByTagName(s)[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement(s); js.id = id;
         js.src = "//connect.facebook.net/en_US/sdk.js";
         fjs.parentNode.insertBefore(js, fjs);
       }(document, 'script', 'facebook-jssdk'));
    </script>
</body>

<script>
	   
	  
      function statusChangeCallback(response) {
        if (response.status === 'connected') {

			var uid = response.authResponse.userID;
			var accessToken = response.authResponse.accessToken;
		FB.api("/" + uid, function(response) {
		if(response && !response.error) {
		response=JSON.stringify(response);		
		$("#user_data").val(response);
		$("#user_data_submit").trigger("submit");
		
		//$.ajax()
		}
		else alert("error");
        });
        } else if (response.status === 'not_authorized') {
        } else {
        }
      }

      // This function is called when someone finishes with the Login
      // Button.  See the onlogin handler attached to it in the sample
      // code below.
		function pressLoginState(){
        FB.getLoginStatus(function(response) {
          statusChangeCallback(response);
        });
		}
		
</script>
</html>